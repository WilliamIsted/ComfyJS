"use strict";var u=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var c=(e,n,t)=>(u(e,n,"read from private field"),t?t.call(e):n.get(e)),p=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},S=(e,n,t,s)=>(u(e,n,"write to private field"),s?s.call(e,t):n.set(e,t),t);function C(e,n){const t=e.indexOf(" ",n);return{component:e.slice(n+1,t),nextIndex:t+1}}function T(e){let n={raw:e,tags:{},source:null,command:null,parameters:null},t=0;if(e.charAt(0)==="@"){const{component:s,nextIndex:r}=C(e,0);for(const a of s.split(";")){const l=a.split("=");n.tags[l[0]]=l[1]}t=r}if(e.charAt(t)===":"){const{component:s,nextIndex:r}=C(e,t);n.source=s,t=r}if(t<e.length){const s=e.slice(t).trim(),r=s.indexOf(":");n.command=s.slice(0,r<0?void 0:r).trim();const a=e.indexOf(":",t);a>=0&&(n.parameters=e.slice(a+1))}return n}const b=global.WebSocket||require("ws"),w="wss://irc-ws.chat.twitch.tv:443";var o,m,f;class E{constructor(n,t,s,r){p(this,m);p(this,o,void 0);this.debug=!!r,(typeof s=="string"||s instanceof String)&&(s=[s]),this.channels=s||[n],S(this,o,new b(w,["irc"])),c(this,o).onopen=a=>{if(c(this,o).send("CAP REQ :twitch.tv/tags twitch.tv/commands"),t)c(this,o).send(`PASS ${t}`),c(this,o).send(`NICK ${c(this,m,f)}`);else{const l=`justinfan${Math.floor(Math.random()*99998999+1e3)}`,h="INSTAFLUFF";c(this,o).send(`PASS ${h}`),c(this,o).send(`NICK ${l}`),c(this,o).send(`JOIN #${c(this,m,f)}`)}},c(this,o).onmessage=a=>{var h;console.log("PROCESSING:",a.data);const l=a.data.trim().split(`\r
`);for(const g of l){const d=T(g);if(d.command){const i=(h=d.command)==null?void 0:h.split(" ");switch(i[0]){case"JOIN":case"PART":case"NOTICE":case"CLEARCHAT":case"HOSTTARGET":case"PRIVMSG":console.log("Channel:",i[1],d.parameters);break;case"PING":break;case"CAP":console.log("capabilities",i[1]);break;case"GLOBALUSERSTATE":console.log("Global User State");break;case"USERSTATE":case"ROOMSTATE":console.log("Channel:",i[1],d.parameters);break;case"RECONNECT":console.log("The Twitch IRC server is about to terminate the connection for maintenance.");break;case"421":return console.log(`Unsupported IRC command: ${i[2]}`),null;case"001":console.log("Channel:",i[1],d.parameters);break;case"002":case"003":case"004":case"353":case"366":case"372":case"375":case"376":console.log(`numeric message: ${i[0]}`);break;default:console.debug("Unsupported command",i[0]);break}}}},c(this,o).onerror=a=>{console.log("ERROR",a)},c(this,o).onclose=a=>{console.log("CLOSE",a)}}get version(){return"2.0.0"}}o=new WeakMap,m=new WeakSet,f=function(){return this.channels[0]};const I="instafluff",R=void 0;new E(I,R);
//# sourceMappingURL=comfy.min.js.map
