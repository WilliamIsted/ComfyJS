"use strict";var Q=(t,r,s)=>{if(!r.has(t))throw TypeError("Cannot "+s)};var n=(t,r,s)=>(Q(t,r,"read from private field"),s?s.call(t):r.get(t)),p=(t,r,s)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,s)},S=(t,r,s,e)=>(Q(t,r,"write to private field"),e?e.call(t,s):r.set(t,s),s);var N=(t,r,s)=>(Q(t,r,"access private method"),s);function St(t){return t.replace(/\\(.)/g,(r,s)=>{switch(s){case"\\":return"\\";case":":return";";case"s":return" ";case"r":return"\r";case"n":return`
`;default:return s}})}function z(t,r){const s=t.indexOf(" ",r);return{component:t.slice(r+1,s),nextIndex:s+1}}function Nt(t){const r={raw:t,tags:{},source:null,command:null,parameters:null};let s=0;if(t[0]==="@"){const{component:e,nextIndex:a}=z(t,0);for(const d of e.split(";")){const I=d.indexOf("="),g=d.substring(0,I),u=d.substring(I+1);r.tags[g]=St(u)}s=a}if(t[s]===":"){const{component:e,nextIndex:a}=z(t,s);r.source=e,s=a}if(s<t.length){const e=t.slice(s).trim(),a=e.indexOf(":");r.command=e.slice(0,a<0?void 0:a).trim();const d=t.indexOf(":",s);d>=0&&(r.parameters=t.slice(d+1))}return r}const Mt=globalThis.WebSocket||require("ws");function Pt(t,r){return new Mt(t,r)}var l=(t=>(t.None="none",t.Ping="Ping",t.Pong="Pong",t.Connect="connect",t.Reconnected="reconnect",t.Error="error",t.Warning="Warning",t.ChatMode="chatmode",t.ClearChat="ClearChat",t.RoomState="roomstate",t.GlobalUserState="globaluserstate",t.UserState="userstate",t.Notice="notice",t.Join="join",t.Leave="leave",t.Command="command",t.Chat="message",t.Reply="reply",t.Whisper="whisper",t.Announcement="announcement",t.Cheer="Cheer",t.Subscribe="sub",t.Resubscribe="resub",t.SubGift="subgift",t.AnonymousSubGift="anonsubgift",t.MysterySubGift="submysterygift",t.AnonymousMysterySubGift="anonsubmysterygift",t.SubGiftContinue="subgiftcontinue",t.Raid="raid",t.Timeout="Timeout",t.Ban="Ban",t.MessageDeleted="MessageDeleted",t.All="all",t))(l||{});const w={"":"Normal",admin:"Admin",global_mod:"Global Mod",staff:"Staff",mod:"Moderator"};function U(t){const r=t.split("!");return r.length>1?r[0]:void 0}function D(t){if(!t)return;const r=t.split(","),s={};for(const e of r){const[a,d]=e.split("/");s[a]=d}return s}function Rt(t,r){var X,Y;const s=(X=t.parameters)==null?void 0:X.startsWith("ACTION"),e=s?(Y=t.parameters)==null?void 0:Y.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1]:t.parameters,a=t.tags.id,d=t.tags["room-id"],I=t.tags["user-id"],g=U(t.source),u=t.tags["display-name"]||t.tags.login||g,C=w[t.tags["user-type"]],J=D(t.tags["badge-info"]||""),m=D(t.tags.badges||""),H=t.tags.color||void 0,_=t.tags.emotes,R=t.tags.flags,ot=g===r,ut=t.tags.mod==="1",lt=m?m.founder==="1":!1,T=t.tags.subscriber==="1",dt=t.tags.turbo==="1",gt=m?m.vip==="1":!1,pt=m?m.premium==="1":!1,mt=m?m.partner==="1":!1,ct=m?m["game-developer"]==="1":!1,q=parseInt(t.tags["tmi-sent-ts"]),A=t.tags["emote-only"]==="1",bt=t.tags["msg-id"]==="highlighted-message",ft=t.tags["msg-id"]==="skip-subs-mode-message",E=t.tags["custom-reward-id"]||null,ht=t.tags["first-msg"]==="1",It=t.tags["returning-chatter"]==="1",K={broadcaster:ot,mod:ut,founder:lt,subscriber:T,vip:gt,partner:mt,gameDeveloper:ct,turbo:dt,prime:pt,highlighted:bt,skipSubsMode:ft,customReward:!!E,emoteOnly:A,firstMessage:ht,returningChatter:It};if(t.tags.bits)return{type:"Cheer",data:{channel:r,channelId:d,displayName:u,username:g,userId:I,userType:C,id:a,message:t.parameters,messageType:s?"action":"chat",messageEmotes:_,messageFlags:R,isEmoteOnly:A,subscriber:T,userColor:H,userBadgeInfo:J,userBadges:m,customRewardId:E,flags:K,bits:parseInt(t.tags.bits),timestamp:q,extra:{...t.tags,flags:R||null}}};if(e!=null&&e.startsWith("!")){const Z=e.split(/ (.*)/),yt=Z[0].substring(1).toLowerCase(),Ct=Z[1]||"";return{type:"command",data:{channel:r,channelId:d,displayName:u,username:g,userId:I,userType:C,command:yt,id:a,message:Ct,messageType:s?"action":"chat",messageEmotes:_,messageFlags:R,isEmoteOnly:A,userColor:H,userBadgeInfo:J,userBadges:m,customRewardId:E,flags:K,timestamp:q,extra:{...t.tags,flags:R||null}}}}else return{type:"message",data:{channel:r,channelId:d,displayName:u,username:g,userId:I,userType:C,id:a,message:e,messageType:s?"action":"chat",messageEmotes:_,messageFlags:R,isEmoteOnly:A,userColor:H,userBadgeInfo:J,userBadges:m,customRewardId:E,flags:K,timestamp:q,extra:{...t.tags,flags:R||null}}}}function Ot(t){var r,s,e,a,d,I;try{if(t.command){const g=t.command.split(" "),u=g.length>1?g[1].substring(1):void 0;switch(g[0]){case"PING":return{type:"Ping"};case"PONG":return{type:"Pong"};case"CAP":return null;case"JOIN":return{type:"join",data:{channel:u,username:U(t.source)}};case"PART":return{type:"leave",data:{channel:u,username:U(t.source)}};case"ROOMSTATE":return{type:"roomstate",data:{...t.tags["broadcaster-lang"]&&{broadcasterLanguage:t.tags["broadcaster-lang"]},...t.tags["emote-only"]&&{emoteOnly:t.tags["emote-only"]!=="0"},...t.tags["followers-only"]&&{followersOnly:t.tags["followers-only"]!=="-1"},...t.tags["subs-only"]&&{subscribersOnly:t.tags["subs-only"]!=="0"},...t.tags.r9k&&{r9k:t.tags.r9k!=="0"},...t.tags.rituals&&{rituals:t.tags.rituals!=="0"},...t.tags.slow&&{slow:t.tags.slow!=="0"},channel:u,channelId:t.tags["room-id"]}};case"GLOBALUSERSTATE":return{type:"globaluserstate",data:{displayName:t.tags["display-name"],userId:t.tags["user-id"],userType:w[t.tags["user-type"]],color:t.tags.color,badges:t.tags.badges,badgeInfo:t.tags["badge-info"],emoteSets:t.tags["emote-sets"],extra:t.tags}};case"USERSTATE":return{type:"userstate",data:{channel:u,displayName:t.tags["display-name"],userId:t.tags["user-id"],userType:w[t.tags["user-type"]],color:t.tags.color,badgeInfo:D(t.tags["badge-info"]||""),badges:D(t.tags.badges||""),emoteSets:t.tags["emote-sets"],...t.tags.id&&{id:t.tags.id},mod:t.tags.mod==="1",subscriber:t.tags.subscriber==="1",turbo:t.tags.turbo==="1",extra:t.tags}};case"HOSTTARGET":break;case"USERNOTICE":switch(t.tags["msg-id"]){case"announcement":return{type:"announcement",data:{displayName:t.tags["display-name"]||t.tags.login,channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],message:t.parameters,messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"sub":return{type:"sub",data:{id:t.tags.id,displayName:t.tags["display-name"]||t.tags.login,months:parseInt(t.tags["msg-param-months"]),multiMonthDuration:parseInt(t.tags["msg-param-multimonth-duration"]),multiMonthTenure:parseInt(t.tags["msg-param-multimonth-tenure"]),shouldShareStreak:t.tags["msg-param-should-share-streak"]==="1",subPlan:t.tags["msg-param-sub-plan"],subPlanName:t.tags["msg-param-sub-plan-name"],wasGifted:t.tags["msg-param-was-gifted"]==="true",...t.tags["msg-param-goal-contribution-type"]&&{goalContributionType:t.tags["msg-param-goal-contribution-type"]},...t.tags["msg-param-goal-current-contributions"]&&{goalCurrentContributions:parseInt(t.tags["msg-param-goal-current-contributions"])},...t.tags["msg-param-goal-description"]&&{goalDescription:t.tags["msg-param-goal-description"]},...t.tags["msg-param-goal-target-contributions"]&&{goalTargetContributions:parseInt(t.tags["msg-param-goal-target-contributions"])},...t.tags["msg-param-goal-user-contributions"]&&{goalUserContributions:parseInt(t.tags["msg-param-goal-user-contributions"])},channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],message:t.parameters,messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"resub":return{type:"resub",data:{id:t.tags.id,displayName:t.tags["display-name"]||t.tags.login,cumulativeMonths:parseInt(t.tags["msg-param-cumulative-months"]),months:parseInt(t.tags["msg-param-months"]),multiMonthDuration:parseInt(t.tags["msg-param-multimonth-duration"]),multiMonthTenure:parseInt(t.tags["msg-param-multimonth-tenure"]),...t.tags["msg-param-streak-months"]&&{streakMonths:parseInt(t.tags["msg-param-streak-months"])},shouldShareStreak:t.tags["msg-param-should-share-streak"]==="1",subPlan:t.tags["msg-param-sub-plan"],subPlanName:t.tags["msg-param-sub-plan-name"],wasGifted:t.tags["msg-param-was-gifted"]==="true",channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],message:t.parameters,messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"submysterygift":return{type:"submysterygift",data:{id:t.tags.id,displayName:t.tags["display-name"]||t.tags.login,giftCount:parseInt(t.tags["msg-param-mass-gift-count"]),senderCount:parseInt(t.tags["msg-param-sender-count"]),subPlan:t.tags["msg-param-sub-plan"],subPlanName:t.tags["msg-param-sub-plan-name"],...t.tags["msg-param-goal-contribution-type"]&&{goalContributionType:t.tags["msg-param-goal-contribution-type"]},...t.tags["msg-param-goal-current-contributions"]&&{goalCurrentContributions:parseInt(t.tags["msg-param-goal-current-contributions"])},...t.tags["msg-param-goal-description"]&&{goalDescription:t.tags["msg-param-goal-description"]},...t.tags["msg-param-goal-target-contributions"]&&{goalTargetContributions:parseInt(t.tags["msg-param-goal-target-contributions"])},...t.tags["msg-param-goal-user-contributions"]&&{goalUserContributions:parseInt(t.tags["msg-param-goal-user-contributions"])},channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"subgift":return{type:"subgift",data:{id:t.tags.id,displayName:t.tags["display-name"]||t.tags.login,recipientDisplayName:t.tags["msg-param-recipient-display-name"],recipientId:t.tags["msg-param-recipient-id"],recipientUsername:t.tags["msg-param-recipient-user-name"],months:parseInt(t.tags["msg-param-months"]),giftMonths:parseInt(t.tags["msg-param-gift-months"]),subPlan:t.tags["msg-param-sub-plan"],subPlanName:t.tags["msg-param-sub-plan-name"],...t.tags["msg-param-goal-contribution-type"]&&{goalContributionType:t.tags["msg-param-goal-contribution-type"]},...t.tags["msg-param-goal-current-contributions"]&&{goalCurrentContributions:parseInt(t.tags["msg-param-goal-current-contributions"])},...t.tags["msg-param-goal-description"]&&{goalDescription:t.tags["msg-param-goal-description"]},...t.tags["msg-param-goal-target-contributions"]&&{goalTargetContributions:parseInt(t.tags["msg-param-goal-target-contributions"])},...t.tags["msg-param-goal-user-contributions"]&&{goalUserContributions:parseInt(t.tags["msg-param-goal-user-contributions"])},channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"giftsubcontinue":return{type:"subgiftcontinue",data:{id:t.tags.id,displayName:t.tags["display-name"]||t.tags.login,gifterDisplayName:t.tags["msg-param-sender-name"]||t.tags["msg-param-sender-login"],gifterUsername:t.tags["msg-param-sender-login"],channel:u,channelId:t.tags["room-id"],username:t.tags.login,userId:t.tags["user-id"],messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"raid":return{type:"raid",data:{id:t.tags.id,profileImageURL:t.tags["msg-param-profileImageURL"],displayName:t.tags["msg-param-displayName"]||t.tags["display-name"]||t.tags["msg-param-login"]||t.tags.login,viewers:parseInt(t.tags["msg-param-viewerCount"]),channel:u,channelId:t.tags["room-id"],username:t.tags["msg-param-login"]||t.tags.login,userId:t.tags["user-id"],messageType:t.tags["msg-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};default:console.log("TODO IMPLEMENT COMMAND",t);break}break;case"WHISPER":return console.log(t),console.log("Channel:",u,t.parameters),{type:"whisper",data:{displayName:t.tags["display-name"]||t.tags.login||U(t.source),username:U(t.source),userId:t.tags["user-id"],userType:w[t.tags["user-type"]],color:t.tags.color,badges:t.tags.badges,emotes:t.tags.emotes,turbo:t.tags.turbo==="1",threadId:t.tags["thread-id"],messageId:t.tags["message-id"],message:t.parameters,messageType:"whisper",extra:t.tags}};case"NOTICE":return(r=t.parameters)!=null&&r.includes("Login unsuccessful")||(s=t.parameters)!=null&&s.includes("Login authentication failed")||(e=t.parameters)!=null&&e.includes("Error logging in")||(a=t.parameters)!=null&&a.includes("Improperly formatted auth")||(d=t.parameters)!=null&&d.includes("Invalid NICK")||(I=t.parameters)!=null&&I.includes("Invalid CAP REQ")?{type:"error",data:{channel:u,message:t.parameters}}:{type:"notice",data:{channel:u,msgId:t.tags["msg-id"],message:t.parameters}};case"CLEARCHAT":return t.tags["target-user-id"]?t.tags["ban-duration"]?{type:"Timeout",data:{channel:u,channelId:t.tags["room-id"],duration:parseInt(t.tags["ban-duration"]),username:t.parameters,userId:t.tags["target-user-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}}:{type:"Ban",data:{channel:u,channelId:t.tags["room-id"],username:t.parameters,userId:t.tags["target-user-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}}:{type:"ClearChat",data:{channel:u,channelId:t.tags["room-id"],timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"CLEARMSG":return{type:"MessageDeleted",data:{channel:u,channelId:t.tags["room-id"],displayName:t.tags["display-name"]||t.tags.login,username:t.tags.login,id:t.tags["target-msg-id"],message:t.parameters,timestamp:parseInt(t.tags["tmi-sent-ts"]),extra:t.tags}};case"PRIVMSG":return Rt(t,u);case"RECONNECT":console.log("The Twitch IRC server is about to terminate the connection for maintenance.");break;default:{const C=parseInt(g[0]);if(C>=400)return console.debug(`Error IRC command: ${C}`,t),null;switch(C){case 1:return null;case 2:case 3:case 4:case 353:case 366:case 372:case 375:return null;case 376:return{type:"connect",data:{username:g[1]}};default:return console.debug("Unsupported numeric command",C),null}}break}}else console.debug("Unprocessed IRC message:",t.raw)}catch(g){return console.error(g),{type:"Warning",data:g}}return console.log(t),null}function kt(t){t.send("CAP REQ :twitch.tv/tags twitch.tv/commands")}function Ut(t,r,s){const e=s?r:`justinfan${Math.floor(Math.random()*99998999+1e3)}`,a=s||"INSTAFLUFF";t.send(`PASS ${a}`),t.send(`NICK ${e}`)}function x(t,r){t.send(`JOIN #${r}`)}function Gt(t,r){t.send(`PART #${r}`)}function At(t){t.send("PING")}function Et(t){t.send("PONG")}function wt(t,r,s){t.send(`PRIVMSG #${r} :${s}`)}function Bt(t,r,s,e){t.send(`@reply-parent-msg-id=${s} PRIVMSG #${r} :${e}`)}var i,P,G,M,O,k,B,c,b,L,tt,W,at,$,rt,v,st,F,nt,V,et,j,it;class Dt{constructor(r,s,e,a){p(this,k);p(this,c);p(this,L);p(this,W);p(this,$);p(this,v);p(this,F);p(this,V);p(this,j);p(this,i,void 0);p(this,P,void 0);p(this,G,void 0);p(this,M,void 0);p(this,O,void 0);S(this,O,0),this.chatModes={},this.handlers={},S(this,P,r),S(this,G,s),this.debug=!!a,(typeof e=="string"||e instanceof String)&&(e=[e]),this.channels=e||[r],N(this,L,tt).call(this)}get version(){return"2.0.0"}on(r,s){this.handlers[r]=s}say(r,s){n(this,i)&&n(this,c,b)&&wt(n(this,i),s||n(this,k,B),r)}reply(r,s,e){n(this,i)&&n(this,c,b)&&Bt(n(this,i),e||n(this,k,B),r,s)}join(r){n(this,i)&&n(this,c,b)&&x(n(this,i),r)}leave(r){n(this,i)&&n(this,c,b)&&Gt(n(this,i),r)}deleteMessage(r,s){n(this,i)&&n(this,c,b)}destroy(){n(this,i)&&n(this,i).readyState!==n(this,i).CLOSED&&n(this,i).close()}}i=new WeakMap,P=new WeakMap,G=new WeakMap,M=new WeakMap,O=new WeakMap,k=new WeakSet,B=function(){return this.channels[0]},c=new WeakSet,b=function(){return n(this,i)&&n(this,i).readyState===n(this,i).OPEN},L=new WeakSet,tt=function(){if(n(this,c,b))return;S(this,i,Pt("wss://irc-ws.chat.twitch.tv:443","irc")),n(this,i).onopen=()=>{N(this,W,at).call(this)},n(this,i).onmessage=s=>{N(this,j,it).call(this,s)},n(this,i).onerror=s=>{N(this,$,rt).call(this,s)},n(this,i).onclose=s=>{N(this,v,st).call(this,s)}},W=new WeakSet,at=function(){n(this,i)&&n(this,c,b)&&(kt(n(this,i)),Ut(n(this,i),n(this,P),n(this,G)),x(n(this,i),n(this,k,B)))},$=new WeakSet,rt=function(r){console.error("ERROR",r)},v=new WeakSet,st=function(r){console.info("CLOSE",r),n(this,M)&&clearInterval(n(this,M))},F=new WeakSet,nt=function(){n(this,i)&&n(this,c,b)&&(S(this,O,Date.now()),At(n(this,i)))},V=new WeakSet,et=function(r){if(n(this,i)&&n(this,c,b))switch(r.type){case l.Connect:S(this,P,r.data.username),n(this,M)&&clearInterval(n(this,M)),S(this,M,setInterval(()=>{N(this,F,nt).call(this)},6e4));break;case l.Ping:Et(n(this,i));break;case l.Pong:r.data=r.data||{},r.data.latency=Date.now()-n(this,O);break;case l.RoomState:this.chatModes[r.data.channel]={...this.chatModes[r.data.channel],...r.data},this.handlers[l.ChatMode]&&this.handlers[l.ChatMode](this.chatModes[r.data.channel]);break;case l.Error:n(this,i).close();break;case l.Chat:r.data.self=r.data.username===n(this,P),this.handlers[l.Reply]&&r.data.extra["reply-parent-msg-id"]&&this.handlers[l.Reply]({...r.data,parentId:r.data.extra["reply-parent-msg-id"],parentUserId:r.data.extra["reply-parent-user-id"],parentUser:r.data.extra["reply-parent-user-login"],parentMessage:r.data.extra["reply-parent-msg-body"],parentDisplayName:r.data.extra["reply-parent-display-name"]||r.data.extra["reply-parent-user-login"]});break}},j=new WeakSet,it=function(r){if(!n(this,i)||!n(this,c,b))return;const s=r.data.trim().split(`\r
`);for(const e of s){const a=Ot(Nt(e));a&&a.type!==l.None&&(N(this,V,et).call(this,a),this.handlers[a.type]&&this.handlers[a.type](a.data),this.handlers[l.All]&&this.handlers[l.All]({event:a.type,...a.data}))}};let o;function h(t){if(t){const r=t.split("/"),s={};for(const e of r){const[a,d]=e.split(":");s[a]=d.split(",")}return s}return null}function y(t){const r={};for(const s in t.extra)t.extra[s]===""?r[s]=null:t.extra[s]==="1"?r[s]=!0:t.extra[s]==="0"?r[s]=!1:r[s]=t.extra[s];return r["badge-info-raw"]=r["badge-info"],r["badge-info"]=t.userBadgeInfo||null,r["badges-raw"]=r.badges,r.badges=t.userBadges||null,r["emotes-raw"]=r.emotes,r.emotes=h(t.messageEmotes),r.username=t.username,r["message-type"]=t.messageType,r}const f={version:()=>"2.0.0",onError:t=>{console.error("Error:",t)},onCommand:(t,r,s,e,a)=>{o&&o.debug&&console.debug("onCommand default handler")},onChat:(t,r,s,e,a)=>{o&&o.debug&&console.debug("onChat default handler")},onCheer:(t,r,s,e,a)=>{o&&o.debug&&console.debug("onCheer default handler")},onWhisper:(t,r,s,e,a)=>{o&&o.debug&&console.debug("onWhisper default handler")},onSub:(t,r,s,e)=>{o&&o.debug&&console.debug("onSub default handler")},onResub:(t,r,s,e,a,d)=>{o&&o.debug&&console.debug("onResub default handler")},onSubGift:(t,r,s,e,a,d)=>{o&&o.debug&&console.debug("onSubGift default handler")},onSubMysteryGift:(t,r,s,e,a)=>{o&&o.debug&&console.debug("onSubMysteryGift default handler")},onTimeout:(t,r,s)=>{o&&o.debug&&console.debug("onTimeout default handler")},onBan:(t,r)=>{o&&o.debug&&console.debug("onBan default handler")},Init:(t,r,s,e)=>{o=new Dt(t,r,s,e),o.on(l.Command,a=>{f.onCommand(a.displayName||a.username,a.command,a.message,a.flags,{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.Chat,a=>{f.onChat(a.displayName||a.username,a.message,a.flags,a.self,{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.Cheer,a=>{f.onCheer(a.displayName||a.username,a.message,a.bits,a.flags,{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.Subscribe,a=>{console.log("SUB",a),f.onSub(a.displayName||a.username,a.message,{prime:a.subPlan==="prime",plan:a.subPlan,planName:a.subPlanName||null},{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.Resubscribe,a=>{console.log("RESUB",a),f.onResub(a.displayName||a.username,a.message,a.months,a.cumulativeMonths,{prime:a.subPlan==="prime",plan:a.subPlan,planName:a.subPlanName||null},{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.SubGift,a=>{f.onSubGift(a.displayName||a.username,a.streakMonths,a.recipientUser,a.senderCount,{prime:a.subPlan==="prime",plan:a.subPlan,planName:a.subPlanName||null},{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.MysterySubGift,a=>{f.onSubMysteryGift(a.displayName||a.username,a.giftCount,a.senderCount,{prime:a.subPlan==="prime",plan:a.subPlan,planName:a.subPlanName||null},{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes)})}),o.on(l.Timeout,a=>{f.onTimeout(a.displayName||a.username,a.duration,{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes),timedOutUserId:a.userId})}),o.on(l.Ban,a=>{f.onBan(a.displayName||a.username,{...a,userState:y(a),extra:null,flags:a.extra.flags,roomId:a.channelId,messageEmotes:h(a.messageEmotes),bannedUserId:a.userId})})}};typeof module<"u"&&module.exports&&(module.exports=f);typeof window<"u"&&(window.ComfyJSNew=f);
//# sourceMappingURL=comfy.min.js.map
